Why we want @Transaction annotation?
Ans:- When multiple request try to access critical section, data consistency can happen.

What is @Transaction?
Ans:- Transaction is something like ACID Properties.

What is ACID Properties?
Ans:- A -> Atomicity, C -> Consistency, I -> Isolation, D -> Durability

    A(Atomicity)   -> Ensure all operations in transaction are completed successfully. If any operation fails entire transaction is rolled back.
    C(Consistency) -> Ensure the DB state before and after transaction is consistent.
    I(Isolation)   -> Ensures that, if multiple transaction are running in parallel, they do not interface each other.
    D(Durability)  -> Ensure that committed transaction will never be lost despite of the system failure.

How transaction work?
Ans:-
    BEGIN_TRANSACTION
                - Debit From A
                - Credit TO B
                IF All Success:
                    COMMIT;
                ELSE:
                    ROLLBACK;
    END_TRANSACTION

Note : 1. Only debit and credit is the business logic, COMMIT, ROLLBACK and all other part is the boilerplate code that has handle by the spring, this is nothing but the use of the AOP.
       2. Dependency required =  spring-boot-starter-data-jpa
       3. We can use @Transaction annotation on the top of method and class also
            IF we use at the class level, then all methods inside it will be treated as the transaction except the private method.
            IF we use at the method level, then only that specific method will treat as the transaction behaviour.
       4. FYI, @EnableTransactionManagement annotation is taking care by default by the spring boot


=======================================YT:2===================================

Transaction Managers:
    Core component in Transaction
    Responsible for managing transaction(Getting transaction, COMMITING transaction and ROLLBACK transaction)


                        TransactionManager(Interface)

                                      ↓(extends)

                        PlatformTransactionManager(Interface)  -> getTransaction (3 Methods)
                                                                  commit
                                                                  rollback

                                      ↓
                        AbstractPlatformTransactionManager(abstract class) -> getTransaction(Provide Impl of )
                                                                              commit
                                                                              rollback

                                       ↓ (below are concrete class)
                ----------------------------------------------------------
                ↓              ↓                   ↓                     ↓
        DataSource          Hibernate             JPA(Default)          JTA (Use in 2 phase COMMIT transaction)
        TransactionManager  TransactionManager    TransactionManager    TransactionManager
                ↓
        JDBC
        TransactionManager

TransactionManager have 2 types:
    1.Declarative
        Transaction management through the annotation.@Transaction
        Springboot will choose appropriate transaction manager
        we can create explicit transaction manager and tell spring to choose that
    2.Programmatic


Q. How Transaction Annotation work internally?

Step1: Uses pointcut expression to search for methods having @Transactional Annotation
        @within("org.springframework.transaction.annotation.Transaction")

Step2: Once point cut expression matches, run an "Around" type advise
        invokeWithinTransaction method present in TransactionInterceptor class


invokeWithinTransaction() -> This method will be run when method is will have @Transaction annotation
    Within this method 3 task will be perform
        1.CreateTransaction
        2.InvokeMethod/InvokeClass
        3.Commit/Rollback Transaction






